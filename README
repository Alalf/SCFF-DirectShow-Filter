* SCFF DirectShow Filter Ver 0.0.1 (2012/5/10)

** ビルド+利用方法

1. http://ffmpeg.zeranoe.com/builds/ からSharedビルド及びDevビルドを取得する
  - ext/ffmpeg/amd64に64bit版を、ext/ffmpeg/x86に32bit版を展開する
  - SharedもDevも同じディレクトリに展開すること（数個のファイルが上書きされるが問題ない）
  - ext/ffmpeg/amd64/README.txt, ext/ffmpeg/x86/README.txtが存在するように確認すること
2. (重要！) ext/ffmpeg/amd64/include/libavutil/pixdesc.hおよび
   ext/ffmpeg/x86/include/libavutil/pixdesc.hの以下の部分:
> extern const AVPixFmtDescriptor av_pix_fmt_descriptors[];
   を
> extern __declspec(dllimport) const AVPixFmtDescriptor av_pix_fmt_descriptors[];
   のように書き換えてください。一応tools/pixdesc.patchも添付してあります。
3. ソリューションを開き、全てのビルドが通ることを確認
  - Microsoft Visual Studio 2010 Express Edition + Windows SDK 7.1で確認済み
  - 必要ならばいくつかのプロジェクト設定を書き換えること
4. tools/copy-binaries.batを実行してdistディレクトリにdllなどをコピー
5. tools/install-debug.batかtools/install-release.batを実行
6. 各種エンコーダを起動しフィルタが認識されているかチェック
7. dist/*にあるヘルパーアプリケーションを起動し取り込み設定を行う
8. デバッグバージョンを利用する場合:
  - プロジェクト設定からローカルWindowsデバッガーを選ぶ
  - コマンドにWME/KTE/FMEなどを選択すればデバッグ文字列などを見ることが出来る。

** 開発者向け

- パッチを作成したい場合やコードを追加したい場合はGoogle C++スタイルガイドに従ってください
-- Google C++スタイルガイド 日本語訳
--- http://www.textdrop.net/google-styleguide-ja/cppguide.xml
-- このガイドは単純に決め事ではなく、バグを減らすために役に立つテクニックもいくらか含まれているようです。

- scff-dsfにはdoxygenコメントをつけてあります
-- Doxygen(http://www.stack.nl/~dimitri/doxygen/index.html)
--- プログラムの全体的な構造を把握したい場合はぜひ利用してみてください。

** 各種エンコーダー対応情報

*** Windows Media Encoder etc.
-  YUV420P(I420)に加えてRGB 32(RGB0),YUV422(UYVY)フォーマット出力が使えるようになりました。
-- （暫定対応なのでYUV422(UYVY)はかなり機能が制限されます）
-- WMEのプロパティ > 処理 > ビデオ > ピクセルの形式から「RGB 32」「UYVY」を選択することで利用できます。

*** KoToEncoder(KTE)
- KTEでYUV420P出力を利用する場合、scff-dsf/base/constants.hの以下の部分：
> // #define FOR_KOTOENCODER
  を
> #define FOR_KOTOENCODER
  のように書き換えてください。
- KTEはRGB32出力をサポートしたフィルタを利用する場合、フィルタの出力をRGB32に固定するようです。
-- 書き換え量は増えますが、YUV422も利用可能です。
--- 詳しくはソリューション内検索で"FOR_KOTOENCODER"で検索してみてください。
- KoToEncoderのプレビュー機能はI420出力利用時にうまく動かないようです。
-- 出力サイズを設定したあとKTEを再起動すればプレビューが表示されるようになります。

** 関連するソフトウェア、ソースコードについて

- DirectShow base classes - efines class hierarchy for streams architecture.
-- Copyright (c) 1992-2001 Microsoft Corporation.  All rights reserved.
- ISO C9x  compliant inttypes.h for Microsoft Visual Studio
-- Copyright (c) 2006 Alexander Chemeris

- ffmpegプロジェクト(http://ffmpeg.org)
-- 利用しているLGPLライブラリ:
--- libavutil: a library containing functions for simplifying programming, including random number generators, data structures, mathematics routines, core multimedia utilities, and much more.
--- libavcodec: a library containing decoders and encoders for audio/video codecs.
--- libswscale: a library performing highly optimized image scaling and color space/pixel format conversion operations.
--- libavfilter: a library containing media filters.
--- libavformat: a library containing demuxers and muxers for multimedia container formats.
--- libswresample: a library performing highly optimized audio resampling, rematrixing and sample format conversion operations.
-- 利用しているLGPLライセンスのソースコード
--- libavutil/colorspace.h
--- libavfilter/drawutils.c
--- libavfilter/drawutils.h

** 注意
- SCFF DirectShow Filterは"フリーソフトウェア"です。
- 作者は本ソフトウェアに関する一切の義務（サポート、恒久的アップデート）を持ちません。
- また、本ソフトウェアの使用により生じた直接的、間接的損害に一切の責任を持ちません。
- 本ソフトウェアの利用についてはLICENSE(LGPLv.3の詳細)も参照してください。
